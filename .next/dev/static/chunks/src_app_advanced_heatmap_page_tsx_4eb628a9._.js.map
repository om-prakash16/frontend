{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/NGTA/frontend/src/app/advanced/heatmap/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport axios from \"axios\";\r\nimport { Layers, RefreshCw, Box } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst API_URL = \"http://localhost:8000/api/v1\";\r\n\r\ninterface SectorData {\r\n    name: string;\r\n    change: number;\r\n    volume: number;\r\n    top_stock: string;\r\n}\r\n\r\ninterface HeatmapResponse {\r\n    timestamp: string;\r\n    sectors: SectorData[];\r\n}\r\n\r\nexport default function SectorHeatmapPage() {\r\n    const { data, isLoading } = useQuery({\r\n        queryKey: [\"advanced-heatmap\"],\r\n        queryFn: async () => {\r\n            const { data } = await axios.get<HeatmapResponse>(`${API_URL}/advanced/heatmap`);\r\n            return data;\r\n        },\r\n    });\r\n\r\n    if (isLoading) return <div className=\"p-8 text-center animate-pulse\">Loading Sector Heatmap...</div>;\r\n    if (!data) return null;\r\n\r\n    // Helper to size blocks based on volume (simple normalized sizing)\r\n    const maxVol = Math.max(...data.sectors.map(s => s.volume));\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-4 md:p-8 space-y-10 animate-in fade-in duration-500 h-[calc(100vh-100px)] flex flex-col\">\r\n            <header className=\"flex-none\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <Layers className=\"w-8 h-8 text-blue-500\" />\r\n                        <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-500 to-cyan-500 bg-clip-text text-transparent\">\r\n                            Live Sector Heatmap\r\n                        </h1>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground bg-muted px-3 py-1 rounded-full\">\r\n                        <RefreshCw className=\"w-3 h-3 animate-spin\" />\r\n                        Live\r\n                    </div>\r\n                </div>\r\n                <p className=\"text-muted-foreground\">\r\n                    Visualizing aggregated sector performance. Size represents Volume, Color represents Change.\r\n                </p>\r\n            </header>\r\n\r\n            <div className=\"flex-1 w-full bg-card rounded-xl border p-1 shadow-sm overflow-hidden relative\">\r\n                <div className=\"absolute inset-0 flex flex-wrap content-start\">\r\n                    {data.sectors.map((sector, idx) => {\r\n                        // Sizing logic: simple proportional width based on random layout for now (CSS Grid would be better for real treemap)\r\n                        // Using flex-grow with base size logic\r\n                        const volScore = Math.max(0.5, (sector.volume / maxVol));\r\n\r\n                        const bgClass =\r\n                            sector.change > 2.0 ? \"bg-emerald-600\" :\r\n                                sector.change > 0.5 ? \"bg-emerald-500\" :\r\n                                    sector.change > 0 ? \"bg-emerald-400\" :\r\n                                        sector.change > -0.5 ? \"bg-red-400\" :\r\n                                            sector.change > -2.0 ? \"bg-red-500\" : \"bg-red-600\";\r\n\r\n                        return (\r\n                            <motion.div\r\n                                key={sector.name}\r\n                                initial={{ opacity: 0, scale: 0.9 }}\r\n                                animate={{ opacity: 1, scale: 1 }}\r\n                                transition={{ delay: idx * 0.05 }}\r\n                                className={`\r\n                                    relative p-4 border-2 border-background \r\n                                    text-white flex flex-col justify-center items-center text-center\r\n                                    cursor-pointer hover:brightness-110 transition-all\r\n                                    ${bgClass}\r\n                                `}\r\n                                style={{\r\n                                    flexGrow: volScore * 10,\r\n                                    width: `${Math.max(15, volScore * 30)}%`, // Dynamic width\r\n                                    height: '50%' // Two rows roughly\r\n                                }}\r\n                            >\r\n                                <div className=\"font-bold text-lg md:text-xl truncate w-full px-2\">{sector.name}</div>\r\n                                <div className=\"text-2xl md:text-3xl font-black my-1\">\r\n                                    {sector.change > 0 ? \"+\" : \"\"}{sector.change.toFixed(2)}%\r\n                                </div>\r\n                                <div className=\"mt-2 text-xs md:text-sm font-medium opacity-90 bg-black/20 px-2 py-1 rounded\">\r\n                                    Top: {sector.top_stock}\r\n                                </div>\r\n                                <div className=\"absolute top-2 right-2 opacity-50\">\r\n                                    <Box className=\"w-4 h-4\" />\r\n                                </div>\r\n                            </motion.div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;;;AALA;;;;;AAOA,MAAM,UAAU;AAcD,SAAS;;IACpB,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,IAAA,0LAAQ,EAAC;QACjC,UAAU;YAAC;SAAmB;QAC9B,OAAO;0CAAE;gBACL,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,mJAAK,CAAC,GAAG,CAAkB,GAAG,QAAQ,iBAAiB,CAAC;gBAC/E,OAAO;YACX;;IACJ;IAEA,IAAI,WAAW,qBAAO,6LAAC;QAAI,WAAU;kBAAgC;;;;;;IACrE,IAAI,CAAC,MAAM,OAAO;IAElB,mEAAmE;IACnE,MAAM,SAAS,KAAK,GAAG,IAAI,KAAK,OAAO,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,MAAM;IAEzD,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAO,WAAU;;kCACd,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC,mNAAM;wCAAC,WAAU;;;;;;kDAClB,6LAAC;wCAAG,WAAU;kDAA8F;;;;;;;;;;;;0CAIhH,6LAAC;gCAAI,WAAU;;kDACX,6LAAC,gOAAS;wCAAC,WAAU;;;;;;oCAAyB;;;;;;;;;;;;;kCAItD,6LAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;0BAKzC,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;8BACV,KAAK,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ;wBACvB,qHAAqH;wBACrH,uCAAuC;wBACvC,MAAM,WAAW,KAAK,GAAG,CAAC,KAAM,OAAO,MAAM,GAAG;wBAEhD,MAAM,UACF,OAAO,MAAM,GAAG,MAAM,mBAClB,OAAO,MAAM,GAAG,MAAM,mBAClB,OAAO,MAAM,GAAG,IAAI,mBAChB,OAAO,MAAM,GAAG,CAAC,MAAM,eACnB,OAAO,MAAM,GAAG,CAAC,MAAM,eAAe;wBAE1D,qBACI,6LAAC,uMAAM,CAAC,GAAG;4BAEP,SAAS;gCAAE,SAAS;gCAAG,OAAO;4BAAI;4BAClC,SAAS;gCAAE,SAAS;gCAAG,OAAO;4BAAE;4BAChC,YAAY;gCAAE,OAAO,MAAM;4BAAK;4BAChC,WAAW,CAAC;;;;oCAIR,EAAE,QAAQ;gCACd,CAAC;4BACD,OAAO;gCACH,UAAU,WAAW;gCACrB,OAAO,GAAG,KAAK,GAAG,CAAC,IAAI,WAAW,IAAI,CAAC,CAAC;gCACxC,QAAQ,MAAM,mBAAmB;4BACrC;;8CAEA,6LAAC;oCAAI,WAAU;8CAAqD,OAAO,IAAI;;;;;;8CAC/E,6LAAC;oCAAI,WAAU;;wCACV,OAAO,MAAM,GAAG,IAAI,MAAM;wCAAI,OAAO,MAAM,CAAC,OAAO,CAAC;wCAAG;;;;;;;8CAE5D,6LAAC;oCAAI,WAAU;;wCAA+E;wCACpF,OAAO,SAAS;;;;;;;8CAE1B,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC,0MAAG;wCAAC,WAAU;;;;;;;;;;;;2BAxBd,OAAO,IAAI;;;;;oBA4B5B;;;;;;;;;;;;;;;;;AAKpB;GApFwB;;QACQ,0LAAQ;;;KADhB"}}]
}