{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/NGTA/frontend/src/app/advanced/options/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport axios from \"axios\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { BarChart2, TrendingUp, TrendingDown, Target, Activity, AlertCircle } from \"lucide-react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { Suspense } from \"react\";\r\n\r\nconst OptionsChart = dynamic(() => import(\"@/components/advanced/OptionsChart\"), {\r\n    loading: () => <div className=\"h-[400px] w-full flex items-center justify-center bg-muted/10 animate-pulse text-muted-foreground\">Loading Options Chart...</div>,\r\n    ssr: false\r\n});\r\n\r\nconst API_URL = \"http://localhost:8000/api/v1\";\r\n\r\ninterface OptionStrike {\r\n    strike: number;\r\n    call_oi: number;\r\n    put_oi: number;\r\n    call_volume: number;\r\n    put_volume: number;\r\n}\r\n\r\ninterface OptionData {\r\n    symbol: string;\r\n    spot_price: number;\r\n    pcr: number;\r\n    max_pain: number;\r\n    atm_strike: number;\r\n    expiry: string;\r\n    option_chain: OptionStrike[];\r\n}\r\n\r\nfunction OptionsContent() {\r\n    const searchParams = useSearchParams();\r\n    const symbol = searchParams.get(\"symbol\") || \"NIFTY\";\r\n\r\n    const { data, isLoading, error } = useQuery({\r\n        queryKey: [\"advanced-options\", symbol],\r\n        queryFn: async () => {\r\n            const { data } = await axios.get<OptionData>(`${API_URL}/advanced/options/${symbol}`);\r\n            return data;\r\n        },\r\n        refetchInterval: 30000,\r\n    });\r\n\r\n    if (isLoading) return <div className=\"p-8 text-center animate-pulse\">Loading Options Intelligence...</div>;\r\n    if (error) return <div className=\"p-8 text-center text-red-500\">Failed to load data</div>;\r\n\r\n    if (!data) return null;\r\n\r\n    const pcrColor = data.pcr > 1.2 ? \"text-emerald-500\" : data.pcr < 0.8 ? \"text-red-500\" : \"text-yellow-500\";\r\n    const pcrLabel = data.pcr > 1.2 ? \"Bullish\" : data.pcr < 0.8 ? \"Bearish\" : \"Neutral\";\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-4 md:p-8 space-y-8 animate-in fade-in duration-500\">\r\n            <header className=\"mb-8\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                    <Target className=\"w-8 h-8 text-primary\" />\r\n                    <h1 className=\"text-3xl font-bold bg-gradient-to-r from-primary to-purple-500 bg-clip-text text-transparent\">\r\n                        Options Intelligence\r\n                    </h1>\r\n                </div>\r\n                <p className=\"text-muted-foreground\">Deep dive into Open Interest, PCR, and Max Pain for <strong>{symbol}</strong></p>\r\n            </header>\r\n\r\n            {/* Top Stats Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                <StatsCard\r\n                    title=\"Spot Price\"\r\n                    value={data.spot_price.toLocaleString()}\r\n                    icon={Activity}\r\n                    subValue={`ATM: ${data.atm_strike}`}\r\n                />\r\n                <StatsCard\r\n                    title=\"Put-Call Ratio (PCR)\"\r\n                    value={data.pcr.toFixed(2)}\r\n                    valueColor={pcrColor}\r\n                    icon={BarChart2}\r\n                    subValue={pcrLabel}\r\n                />\r\n                <StatsCard\r\n                    title=\"Max Pain\"\r\n                    value={data.max_pain.toLocaleString()}\r\n                    icon={Target}\r\n                    subValue={`Expiry: ${data.expiry}`}\r\n                    highlight\r\n                />\r\n                <StatsCard\r\n                    title=\"Total OI\"\r\n                    value={(data.option_chain.reduce((acc, curr) => acc + curr.call_oi + curr.put_oi, 0) / 1000).toFixed(1) + \"k\"}\r\n                    icon={TrendingUp}\r\n                    subValue=\"Contracts\"\r\n                />\r\n            </div>\r\n\r\n            {/* Analysis Section */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n\r\n                {/* Main OI Chart */}\r\n                <div className=\"lg:col-span-2 bg-card rounded-2xl border border-border p-6 shadow-sm\">\r\n                    <h3 className=\"text-xl font-bold mb-6 flex items-center gap-2\">\r\n                        <BarChart2 className=\"w-5 h-5 text-primary\" /> Open Interest Distribution\r\n                    </h3>\r\n                    <OptionsChart data={data.option_chain} />\r\n                </div>\r\n\r\n                {/* Insights Panel */}\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"bg-primary/10 border border-primary/20 p-4 rounded-xl flex gap-3 items-start\">\r\n                        <Target className=\"h-5 w-5 text-primary mt-0.5\" />\r\n                        <div>\r\n                            <h4 className=\"font-semibold text-primary mb-1\">Max Pain Insight</h4>\r\n                            <p className=\"text-sm\">\r\n                                Market is likely to expire near <strong>{data.max_pain}</strong> to cause maximum loss to option buyers.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"bg-card rounded-2xl border p-6\">\r\n                        <h3 className=\"font-semibold mb-4 text-lg\">Quick Interpretation</h3>\r\n                        <div className=\"space-y-4 text-sm text-muted-foreground\">\r\n                            <div className=\"flex gap-3\">\r\n                                <div className=\"w-1 bg-red-500 rounded-full h-full min-h-[40px]\" />\r\n                                <div>\r\n                                    <strong className=\"text-foreground block\">Call OI &gt; Put OI</strong>\r\n                                    Indicates <strong>Resistance</strong>. Traders are betting the price won't go above this level.\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-3\">\r\n                                <div className=\"w-1 bg-green-500 rounded-full h-full min-h-[40px]\" />\r\n                                <div>\r\n                                    <strong className=\"text-foreground block\">Put OI &gt; Call OI</strong>\r\n                                    Indicates <strong>Support</strong>. Traders are betting the price won't fall below this level.\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction StatsCard({ title, value, icon: Icon, subValue, highlight, valueColor }: any) {\r\n    return (\r\n        <div className={`p-6 rounded-2xl border ${highlight ? 'bg-primary/10 border-primary-20 ring-1 ring-primary/20' : 'bg-card border-border'} shadow-sm transition-all hover:-translate-y-1`}>\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n                <span className=\"text-sm font-medium text-muted-foreground\">{title}</span>\r\n                <div className={`p-2 rounded-lg ${highlight ? 'bg-background' : 'bg-secondary'}`}>\r\n                    <Icon className=\"w-4 h-4 text-primary\" />\r\n                </div>\r\n            </div>\r\n            <div className={`text-3xl font-bold font-mono ${valueColor || ''}`}>\r\n                {value}\r\n            </div>\r\n            {subValue && (\r\n                <div className=\"text-xs text-muted-foreground mt-1 font-medium\">\r\n                    {subValue}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function OptionsIntelligencePage() {\r\n    return (\r\n        <Suspense fallback={<div className=\"p-8 text-center animate-pulse\">Loading Options Module...</div>}>\r\n            <OptionsContent />\r\n        </Suspense>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}